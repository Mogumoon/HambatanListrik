
<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rumus Hambatan Arus Listrik AC</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f7fa;
      padding: 0px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      margin: 0;
    }

    .content-container {
      max-width: 600px;
      width: 100%;
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
      margin-top: 20px;
      margin-bottom: 20px;
    }

    h1 {
      margin-bottom: 25px;
      font-weight: 700;
      text-align: center;
      color: rgb(28, 27, 27);
    }

    #result {
      margin-top: 25px;
      padding: 15px;
      background-color: #e9f0ff;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1.1rem;
      white-space: pre-line;
      color: rgb(28, 27, 27);
      min-height: 60px;
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark w-100">
    <div class="container">
      <a class="navbar-brand" href="#">FISDAS</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="about.html">Kelompok</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="hitung.html">Hitung</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="content-container">
    <h1>Rumus Hambatan Arus Listrik AC</h1>
    <div class="mb-4">
      <label for="jenis" class="form-label fw-semibold">Pilih Jenis Perhitungan:</label>
      <select id="jenis" class="form-select">
        <option value="hambatan">Hambatan (R)</option>
        <option value="reaktansi_induktif">Reaktansi Induktif (XL)</option>
        <option value="reaktansi_kapasitif">Reaktansi Kapasitif (XC)</option>
        <option value="impedansi">Impedansi Total (Z)</option>
        <option value="sudut_fase">Sudut Fase (φ)</option>
        <option value="arus_maksimum">Arus Maksimum (Imax)</option>
        <option value="arus_efektif">Arus Efektif (Irms)</option>
        <option value="daya">Daya Listrik AC (P, Q, S)</option>
        <option value="visualisasi">Visualisasi Gelombang Arus AC (Grafik)</option>
      </select>
    </div>

    <form id="calcForm">
      <div id="inputFields"></div>
      <button type="submit" class="btn btn-primary mt-3 w-100"  >Hitung</button>
    </form>

    <div id="result" aria-live="polite"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const jenisSelect = document.getElementById('jenis');
    const inputFields = document.getElementById('inputFields');
    const resultDiv = document.getElementById('result');
    const form = document.getElementById('calcForm');

    function createInput(label, id, type = 'number', step = 'any', min = null, placeholder = '') {
      return `
        <div class="mb-3">
          <label for="${id}" class="form-label">${label}</label>
          <input type="${type}" class="form-control" id="${id}" name="${id}" step="${step}" ${min !== null ? 'min="' + min + '"' : ''} placeholder="${placeholder}" required>
        </div>
      `;
    }

    function showInputs() {
      const jenis = jenisSelect.value;
      let html = '';
      switch (jenis) {
        case 'hambatan':
          html += createInput("Masukkan nilai hambatan R (Ohm)", "R", "number", "any", 0, "Contoh: 10");
          break;
        case 'reaktansi_induktif':
          html += createInput("Masukkan frekuensi f (Hz)", "f", "number", "any", 0, "Contoh: 50");
          html += createInput("Masukkan induktansi L (H)", "L", "number", "any", 0, "Contoh: 0.05");
          break;
        case 'reaktansi_kapasitif':
          html += createInput("Masukkan frekuensi f (Hz)", "f", "number", "any", 0, "Contoh: 50");
          html += createInput("Masukkan kapasitansi C (F)", "C", "number", "any", 0, "Contoh: 0.00001");
          break;
        case 'impedansi':
          html += createInput("Masukkan frekuensi f (Hz)", "f", "number", "any", 0, "Contoh: 50");
          html += createInput("Masukkan hambatan R (Ohm)", "R", "number", "any", 0, "Contoh: 10");
          html += createInput("Masukkan induktansi L (H)", "L", "number", "any", 0, "Contoh: 0.05");
          html += createInput("Masukkan kapasitansi C (F)", "C", "number", "any", 0, "Contoh: 0.00001");
          break;
        case 'sudut_fase':
          html += createInput("Masukkan frekuensi f (Hz)", "f", "number", "any", 0, "Contoh: 50");
          html += createInput("Masukkan hambatan R (Ohm)", "R", "number", "any", 0, "Contoh: 10");
          html += createInput("Masukkan induktansi L (H)", "L", "number", "any", 0, "Contoh: 0.05");
          html += createInput("Masukkan kapasitansi C (F)", "C", "number", "any", 0, "Contoh: 0.00001");
          break;
        case 'arus_maksimum':
          html += createInput("Masukkan Vmax (Volt)", "Vmax", "number", "any", 0, "Contoh: 220");
          html += createInput("Masukkan impedansi Z (Ohm)", "Z", "number", "any", 0, "Contoh: 50");
          break;
        case 'arus_efektif':
          html += createInput("Masukkan Imax (Ampere)", "Imax", "number", "any", 0, "Contoh: 5");
          break;
        case 'daya':
          html += createInput("Masukkan Vrms (Volt)", "Vrms", "number", "any", 0, "Contoh: 220");
          html += createInput("Masukkan Irms (Ampere)", "Irms", "number", "any", 0, "Contoh: 5");
          html += createInput("Masukkan sudut fase φ (derajat)", "phi_deg", "number", "any", 0, "Contoh: 30");
          break;
        case 'visualisasi':
          html += createInput("Masukkan Imax (Ampere)", "Imax", "number", "any", 0, "Contoh: 5");
          html += createInput("Masukkan frekuensi f (Hz)", "f", "number", "any", 0, "Contoh: 50");
          html += createInput("Masukkan sudut fase φ (derajat)", "phi_deg", "number", "any", 0, "Contoh: 30");
          html += `<canvas id="chart" width="560" height="280" class="mt-3"></canvas>`;
          break;
        default:
          html = '<p>Pilih jenis perhitungan yang valid.</p>';
      }
      inputFields.innerHTML = html;
      resultDiv.innerHTML = '';
    }

    jenisSelect.addEventListener('change', showInputs);
    window.onload = showInputs;

    function calculate(event) {
      if (event) event.preventDefault();

      const jenis = jenisSelect.value;
      resultDiv.innerHTML = '';
      if (jenis === 'visualisasi') {
        visualizeACWave();
        return;
      }

      function getNumber(id) {
        const el = document.getElementById(id);
        if (!el) return null;
        let val = parseFloat(el.value);
        if (isNaN(val) || val < 0) {
          throw new Error(`Input ${id} harus angka positif`);
        }
        return val;
      }

      try {
        switch (jenis) {
          case 'hambatan': {
            let R = getNumber('R');
            let I = 1;
            let V = I * R;
            resultDiv.textContent = `V = I × R\nContoh: Jika arus I = 1 A dan R = ${R} Ω, maka tegangan V = ${V.toFixed(2)} V`;
            break;
          }
          case 'reaktansi_induktif': {
            let f = getNumber('f');
            let L = getNumber('L');
            let omega = 2 * Math.PI * f;
            let XL = omega * L;
            resultDiv.textContent = `XL = ωL = 2π × ${f} × ${L} = ${XL.toFixed(2)} Ω`;
            break;
          }
          case 'reaktansi_kapasitif': {
            let f = getNumber('f');
            let C = getNumber('C');
            if (C === 0) throw new Error("Kapasitansi C tidak boleh nol.");
            let omega = 2 * Math.PI * f;
            let XC = 1 / (omega * C);
            resultDiv.textContent = `XC = 1 / (ωC) = 1 / (2π × ${f} × ${C}) = ${XC.toFixed(2)} Ω`;
            break;
          }
          case 'impedansi': {
            let f = getNumber('f');
            let R = getNumber('R');
            let L = getNumber('L');
            let C = getNumber('C');
            let omega = 2 * Math.PI * f;
            let XL = omega * L;
            let XC = C === 0 ? 0 : 1 / (omega * C);
            let Z = Math.sqrt(R ** 2 + (XL - XC) ** 2);
            resultDiv.textContent = `Z = √(R² + (XL - XC)²) = √(${R}² + (${XL.toFixed(2)} - ${XC.toFixed(2)})²) = ${Z.toFixed(2)} Ω\nXL = ${XL.toFixed(2)} Ω, XC = ${XC.toFixed(2)} Ω`;
            break;
          }
          case 'sudut_fase': {
            let f = getNumber('f');
            let R = getNumber('R');
            let L = getNumber('L');
            let C = getNumber('C');
            let omega = 2 * Math.PI * f;
            let XL = omega * L;
            let XC = C === 0 ? 0 : 1 / (omega * C);
            let phi = Math.atan2(XL - XC, R);
            let phi_deg = phi * 180 / Math.PI;
            resultDiv.textContent = `φ = arctan((XL - XC)/R) = arctan((${XL.toFixed(2)} - ${XC.toFixed(2)}) / ${R}) = ${phi_deg.toFixed(2)}°`;
            break;
          }
          case 'arus_maksimum': {
            let Vmax = getNumber('Vmax');
            let Z = getNumber('Z');
            if (Z === 0) throw new Error("Impedansi Z tidak boleh nol.");
            let Imax = Vmax / Z;
            resultDiv.textContent = `Imax = Vmax / Z = ${Vmax} / ${Z} = ${Imax.toFixed(2)} A`;
            break;
          }
          case 'arus_efektif': {
            let Imax = getNumber('Imax');
            let Irms = Imax / Math.sqrt(2);
            resultDiv.textContent = `Irms = Imax / √2 = ${Imax} / 1.414 = ${Irms.toFixed(2)} A`;
            break;
          }
          case 'daya': {
            let Vrms = getNumber('Vrms');
            let Irms = getNumber('Irms');
            let phi_deg = getNumber('phi_deg');
            let phi_rad = phi_deg * Math.PI / 180;
            let P = Vrms * Irms * Math.cos(phi_rad);
            let Q = Vrms * Irms * Math.sin(phi_rad);
            let S = Vrms * Irms;
            resultDiv.textContent = `P (daya aktif) = Vrms × Irms × cos(φ) = ${Vrms} × ${Irms} × cos(${phi_deg}°) = ${P.toFixed(2)} W\n` +
              `Q (daya reaktif) = Vrms × Irms × sin(φ) = ${Vrms} × ${Irms} × sin(${phi_deg}°) = ${Q.toFixed(2)} VAR\n` +
              `S (daya semu) = Vrms × Irms = ${Vrms} × ${Irms} = ${S.toFixed(2)} VA`;
            break;
          }
          default:
            resultDiv.textContent = "Jenis perhitungan tidak didukung.";
        }
      } catch (err) {
        resultDiv.textContent = "Error: " + err.message;
      }
    }

    function visualizeACWave() {
      // Remove existing canvas if any
      const oldCanvas = document.getElementById('chart');
      if (oldCanvas) oldCanvas.remove();

      // Add new canvas
      const canvas = document.createElement('canvas');
      canvas.id = 'chart';
      canvas.width = 560;
      canvas.height = 280;
      canvas.classList.add('mt-3');
      inputFields.appendChild(canvas);
      resultDiv.textContent = '';

      try {
        const Imax = parseFloat(document.getElementById('Imax').value);
        const f = parseFloat(document.getElementById('f').value);
        const phi_deg = parseFloat(document.getElementById('phi_deg').value);

        if (isNaN(Imax) || Imax <= 0) throw new Error('Imax harus angka positif.');
        if (isNaN(f) || f <= 0) throw new Error('Frekuensi f harus angka positif.');
        if (isNaN(phi_deg)) throw new Error('Sudut fase harus angka.');

        const phi_rad = phi_deg * Math.PI / 180;
        const omega = 2 * Math.PI * f;
        const tMax = 1 / f; // satu periode
        const nPoints = 1000;

        const t = [];
        const I_t = [];
        for (let i = 0; i < nPoints; i++) {
          const time = i * (tMax / nPoints);
          t.push(time.toFixed(4));
          I_t.push(Imax * Math.sin(omega * time - phi_rad));
        }

        const ctx = canvas.getContext('2d');

        new Chart(ctx, {
          type: 'line',
          data: {
            labels: t,
            datasets: [{
              label: 'I(t) = Imax × sin(ωt - φ)',
              data: I_t,
              borderColor: '#2575fc',
              backgroundColor: 'rgba(37,117,252,0.2)',
              fill: true,
              tension: 0.3,
              pointRadius: 0,
              borderWidth: 2,
            }]
          },
          options: {
            responsive: true,
            animation: false,
            interaction: {
              intersect: false,
              mode: 'index',
            },
            scales: {
              x: {
                display: true,
                title: {
                  display: true,
                  text: 'Waktu (detik)'
                },
                ticks: { maxTicksLimit: 10 }
              },
              y: {
                display: true,
                title: {
                  display: true,
                  text: 'Arus (Ampere)'
                },
                suggestedMin: -Imax * 1.2,
                suggestedMax: Imax * 1.2,
              }
            },
            plugins: {
              legend: {
                display: true,
                position: 'top',
              }
            }
          }
        });

        resultDiv.textContent = "Visualisasi gelombang arus AC selama satu periode.";
      } catch (err) {
        resultDiv.textContent = "Error: " + err.message;
      }
    }

    form.addEventListener('submit', calculate);
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>

</html>

